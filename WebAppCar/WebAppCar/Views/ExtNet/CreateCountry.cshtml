@model WebAppCar.ViewModel.CountryViewModel


@{
    ViewBag.Title = "Submit";
    Layout = "~/Views/Shared/_BaseLayout.cshtml";
}
@section headtag
{
    <script>
        function success(btn) {
            submit(btn.up('window').down('form'), '@Url.Action("SuccessSubmit")');
        }

        function failure(btn) {
            submit(btn.up('window').down('form'), '@Url.Action("FailureSubmit")');
        }

        function submit(form, url) {
            form.submit({
                url: url,
                waitMsg: "Submitting...",
                success: function (form, action) {
                    // server responded with success = true
                    var result = action.result;
                },
                failure: function (form, action) {
                    if (action.failureType === Ext.form.action.Action.CONNECT_FAILURE) {
                        Ext.Msg.alert('Error',
                            'Status:' + action.response.status + ': ' +
                            action.response.statusText);
                    }
                    if (action.failureType === Ext.form.action.Action.SERVER_INVALID) {
                        // server responded with success = false
                        Ext.Msg.alert('Invalid', action.result.errorMessage);
                    }
                }
            })
        }
    </script>
}

@section example
{@(
 Html.X().Window()
            .Title("Country")
            .Width(250)
            .Height(200)
            .Layout(LayoutType.Fit)
            .Closable(false)
            .Border(false)
            .Items(
                Html.X().FormPanel()
                    .ID("FormPanelCountry")
                    .Frame(true)
                    .DefaultAnchor("100%")
                    .BodyPadding(6)
                    .FieldDefaults(def =>
                    {
                        def.MsgTarget = MessageTarget.Side;
                    })
                    .Items(
                        Html.X().HiddenFor(m => m.Id),
                        Html.X().TextFieldFor(m => m.Continent),
                        Html.X().TextFieldFor(m => m.NameOfContry)
                    )
            )
            .Buttons(
                Html.X().Button()
                .Text("Submit")
                .DirectEvents(de =>
                {
                    de.Click.Url = Url.Action("SuccessSubmitCountry");
                    de.Click.EventMask.ShowMask = true;
                    de.Click.FormID = "FormPanelCountry";
                })

            )
)
}